# 分批止盈功能需求文档

## 介绍

当前的交易记录系统只支持单一止盈设置，但在实际交易中，投资者通常需要分批止盈来优化收益和风险管理。本功能将扩展现有的止盈止损设置，支持多个止盈目标的设置和管理。

## 需求

### 需求 1

**用户故事：** 作为一个交易者，我希望能够设置多个止盈目标，以便我可以在不同价格点分批卖出持仓，优化我的收益。

#### 验收标准

1. WHEN 用户在交易记录中设置止盈时 THEN 系统应该允许添加多个止盈记录
2. WHEN 用户点击"添加止盈"按钮时 THEN 系统应该显示新的止盈输入行
3. WHEN 用户设置多个止盈目标时 THEN 每个止盈记录应该包含止盈价格、卖出比例和预计收益率
4. WHEN 用户删除某个止盈记录时 THEN 系统应该重新计算总体预计收益率

### 需求 2

**用户故事：** 作为一个交易者，我希望能够看到所有止盈设置的汇总信息，以便我可以了解整体的止盈策略效果。

#### 验收标准

1. WHEN 用户设置多个止盈目标时 THEN 系统应该自动计算并显示总体预计收益率
2. WHEN 用户修改任何止盈设置时 THEN 系统应该实时更新汇总信息
3. WHEN 所有止盈比例之和超过100%时 THEN 系统应该显示警告信息
4. WHEN 用户保存交易记录时 THEN 系统应该验证止盈设置的合理性

### 需求 3

**用户故事：** 作为一个交易者，我希望能够方便地管理多个止盈记录，以便我可以灵活调整我的止盈策略。

#### 验收标准

1. WHEN 用户查看已保存的交易记录时 THEN 系统应该显示所有的止盈设置
2. WHEN 用户编辑交易记录时 THEN 系统应该允许修改、添加或删除止盈记录
3. WHEN 用户删除止盈记录时 THEN 系统应该要求确认操作
4. WHEN 止盈记录少于1条时 THEN 系统应该保持至少一条默认的止盈记录

### 需求 4

**用户故事：** 作为一个交易者，我希望系统能够验证我的止盈设置，以便避免设置错误的止盈参数。

#### 验收标准

1. WHEN 用户输入止盈价格时 THEN 系统应该验证价格必须大于买入价格
2. WHEN 用户输入卖出比例时 THEN 系统应该验证比例必须在0-100%之间
3. WHEN 所有止盈比例之和超过100%时 THEN 系统应该阻止保存并显示错误信息
4. WHEN 用户输入无效数据时 THEN 系统应该显示具体的错误提示信息