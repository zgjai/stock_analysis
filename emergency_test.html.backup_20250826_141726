<!DOCTYPE html>
<html>
<head><title>紧急测试</title></head>
<body>
<h1>紧急测试 - 基本交易记录</h1>
<form id="test-form">
<input name="stock_code" value="000001" placeholder="股票代码">
<input name="stock_name" value="平安银行" placeholder="股票名称">
<select name="trade_type"><option value="buy">买入</option></select>
<input name="price" type="number" value="10.00" placeholder="价格">
<input name="quantity" type="number" value="1000" placeholder="数量">
<select name="reason"><option value="测试">测试</option></select>
<button type="button" onclick="testSave()">测试保存</button>
</form>
<div id="result"></div>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
async function testSave() {
    const form = document.getElementById('test-form');
    const formData = new FormData(form);
    const data = Object.fromEntries(formData.entries());
    data.trade_date = new Date().toISOString();
    
    try {
        const response = await axios.post('/api/trades', data);
        document.getElementById('result').innerHTML = '✅ 成功: ' + JSON.stringify(response.data);
    } catch (error) {
        document.getElementById('result').innerHTML = '❌ 失败: ' + error.message;
    }
}
</script>
</body>
</html>