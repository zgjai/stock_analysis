<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ­¢ç›ˆç›®æ ‡è®¾ç½® - æ ·å¼ä¼˜åŒ–æµ‹è¯•</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" rel="stylesheet">
    
    <!-- è‡ªå®šä¹‰æ ·å¼ -->
    <link href="static/css/components.css" rel="stylesheet">
    
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 0;
        }
        
        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 1.5rem;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }
        
        .page-title {
            text-align: center;
            margin-bottom: 2rem;
            color: #495057;
            font-weight: 700;
        }
        
        .demo-info {
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
            border: 2px solid #e1f5fe;
            border-radius: 1rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
            text-align: center;
        }
        
        .demo-info h5 {
            color: #1976d2;
            margin-bottom: 1rem;
        }
        
        .demo-info p {
            color: #666;
            margin-bottom: 0;
        }
        
        /* æ¼”ç¤ºé¡µé¢ç‰¹æ®Šæ ·å¼ */
        .demo-highlight {
            background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
            border: 2px solid #ffc107;
            border-radius: 0.5rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .improvement-note {
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
            border-left: 4px solid #17a2b8;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 0.5rem 0.5rem 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="page-title">
            <i class="bi bi-bullseye me-3"></i>
            æ­¢ç›ˆç›®æ ‡è®¾ç½® - æ ·å¼ä¼˜åŒ–ç‰ˆ
        </h1>
        
        <div class="demo-info">
            <h5><i class="bi bi-palette me-2"></i>æ ·å¼ä¼˜åŒ–è¯´æ˜</h5>
            <p>å…¨æ–°è®¾è®¡çš„æ­¢ç›ˆç›®æ ‡ç®¡ç†ç•Œé¢ï¼Œé‡‡ç”¨ç°ä»£åŒ–æ¸å˜è®¾è®¡ã€å¢å¼ºçš„äº¤äº’æ•ˆæœå’Œæ›´æ¸…æ™°çš„è§†è§‰å±‚æ¬¡</p>
        </div>
        
        <div class="improvement-note">
            <h6><i class="bi bi-lightbulb me-2"></i>æœ¬æ¬¡ä¼˜åŒ–é‡ç‚¹</h6>
            <ul class="mb-0">
                <li><strong>æ°´å¹³å¸ƒå±€ä¿®å¤</strong> - è¾“å…¥æ¡†å’Œå•ä½ç¬¦å·å¿…é¡»åœ¨åŒä¸€è¡Œ</li>
                <li><strong>input-groupå¼ºåˆ¶æ°´å¹³</strong> - æ·»åŠ CSSç¡®ä¿ä¸ä¼šå‚ç›´æ’åˆ—</li>
                <li><strong>ç´§å‡‘è®¾è®¡</strong> - æ‰€æœ‰å­—æ®µåœ¨ä¸€è¡Œå†…æ˜¾ç¤º</li>
                <li><strong>è°ƒè¯•ä¿¡æ¯</strong> - æ£€æŸ¥Bootstrap input-groupè¡Œä¸º</li>
            </ul>
        </div>
        
        <div class="demo-highlight">
            <h6>ğŸ”§ è°ƒè¯•ä¿¡æ¯</h6>
            <p>å¦‚æœè¾“å…¥æ¡†å’Œå•ä½ç¬¦å·ä»ç„¶ä¸åœ¨åŒä¸€è¡Œï¼Œè¯·æ£€æŸ¥ï¼š</p>
            <ul class="mb-0">
                <li>Bootstrapç‰ˆæœ¬æ˜¯å¦æ­£ç¡®åŠ è½½</li>
                <li>æ˜¯å¦æœ‰å…¶ä»–CSSè¦†ç›–äº†input-groupæ ·å¼</li>
                <li>æµè§ˆå™¨å¼€å‘è€…å·¥å…·ä¸­input-groupçš„flex-directionå±æ€§</li>
            </ul>
        </div>
        
        <!-- æ­¢ç›ˆç›®æ ‡ç®¡ç†ç»„ä»¶å®¹å™¨ -->
        <div id="profit-targets-container"></div>
        
        <!-- æµ‹è¯•æŒ‰é’® -->
        <div class="text-center mt-4">
            <button class="btn btn-primary btn-lg me-3" onclick="addTestData()">
                <i class="bi bi-plus-circle me-2"></i>
                æ·»åŠ æµ‹è¯•æ•°æ®
            </button>
            <button class="btn btn-secondary btn-lg me-3" onclick="clearAllTargets()">
                <i class="bi bi-trash me-2"></i>
                æ¸…ç©ºæ‰€æœ‰ç›®æ ‡
            </button>
            <button class="btn btn-info btn-lg" onclick="validateTargets()">
                <i class="bi bi-check-circle me-2"></i>
                éªŒè¯æ•°æ®
            </button>
        </div>
        
        <!-- ç»“æœæ˜¾ç¤º -->
        <div id="result-display" class="mt-4" style="display: none;">
            <div class="alert alert-info">
                <h6><i class="bi bi-info-circle me-2"></i>æ“ä½œç»“æœ</h6>
                <pre id="result-content"></pre>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- å·¥å…·ç±» -->
    <script src="static/js/utils.js"></script>
    
    <!-- æ­¢ç›ˆç›®æ ‡ç®¡ç†ç»„ä»¶ -->
    <script src="static/js/profit-targets-manager.js"></script>
    
    <script>
        let profitTargetsManager;
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // åˆå§‹åŒ–æ­¢ç›ˆç›®æ ‡ç®¡ç†ç»„ä»¶
            profitTargetsManager = new ProfitTargetsManager('#profit-targets-container', {
                maxTargets: 5,
                minTargets: 1,
                buyPrice: 10.50,
                onTargetsChange: function(targets, isValid) {
                    console.log('ç›®æ ‡å˜åŒ–:', targets, 'æœ‰æ•ˆæ€§:', isValid);
                },
                onValidationChange: function(isValid, errors) {
                    console.log('éªŒè¯çŠ¶æ€å˜åŒ–:', isValid, errors);
                }
            });
            
            // æ·»åŠ ä¸€äº›ç¤ºä¾‹æ•°æ®
            setTimeout(() => {
                addTestData();
            }, 500);
        });
        
        // æ·»åŠ æµ‹è¯•æ•°æ®
        function addTestData() {
            profitTargetsManager.clear();
            
            // æ·»åŠ ç¬¬ä¸€ä¸ªç›®æ ‡
            profitTargetsManager.addTarget({
                profitRatio: '10',
                sellRatio: '30'
            });
            
            // æ·»åŠ ç¬¬äºŒä¸ªç›®æ ‡
            setTimeout(() => {
                profitTargetsManager.addTarget({
                    profitRatio: '20',
                    sellRatio: '30'
                });
            }, 200);
            
            // æ·»åŠ ç¬¬ä¸‰ä¸ªç›®æ ‡
            setTimeout(() => {
                profitTargetsManager.addTarget({
                    profitRatio: '30',
                    sellRatio: '20'
                });
            }, 400);
            
            showResult('å·²æ·»åŠ æµ‹è¯•æ•°æ®');
        }
        
        // æ¸…ç©ºæ‰€æœ‰ç›®æ ‡
        function clearAllTargets() {
            profitTargetsManager.clear();
            showResult('å·²æ¸…ç©ºæ‰€æœ‰ç›®æ ‡');
        }
        
        // éªŒè¯ç›®æ ‡
        function validateTargets() {
            const targets = profitTargetsManager.getTargets();
            const isValid = profitTargetsManager.isValidTargets();
            const errors = profitTargetsManager.getValidationErrors();
            
            const result = {
                targets: targets,
                isValid: isValid,
                errors: errors
            };
            
            showResult(JSON.stringify(result, null, 2));
        }
        
        // æ˜¾ç¤ºç»“æœ
        function showResult(content) {
            const resultDisplay = document.getElementById('result-display');
            const resultContent = document.getElementById('result-content');
            
            resultContent.textContent = content;
            resultDisplay.style.display = 'block';
            
            // 3ç§’åè‡ªåŠ¨éšè—
            setTimeout(() => {
                resultDisplay.style.display = 'none';
            }, 3000);
        }
        
        // æ¨¡æ‹ŸUXUtilsï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰
        if (typeof UXUtils === 'undefined') {
            window.UXUtils = {
                showWarning: function(message) {
                    alert('è­¦å‘Š: ' + message);
                },
                showError: function(message) {
                    alert('é”™è¯¯: ' + message);
                },
                showSuccess: function(message) {
                    alert('æˆåŠŸ: ' + message);
                }
            };
        }
    </script>
</body>
</html>