<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å–å‡ºæŒ‰é’®ä¿®å¤æµ‹è¯•</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">ğŸ”§ å–å‡ºæŒ‰é’®ä¿®å¤æµ‹è¯•</h5>
                    </div>
                    <div class="card-body">
                        <div class="alert alert-info">
                            <h6>ä¿®å¤å†…å®¹ï¼š</h6>
                            <ul class="mb-0">
                                <li>ä¿®å¤äº†äº‹ä»¶ç»‘å®šä¸­çš„ <code>this</code> ä¸Šä¸‹æ–‡é—®é¢˜</li>
                                <li>å°† <code>this.saveTrade()</code> æ”¹ä¸º <code>tradingManager.saveTrade()</code></li>
                                <li>ä¿®å¤äº†æ‰€æœ‰ç›¸å…³çš„äº‹ä»¶ç»‘å®š</li>
                            </ul>
                        </div>

                        <div class="alert alert-warning">
                            <h6>é—®é¢˜åŸå› ï¼š</h6>
                            <p class="mb-0">
                                åœ¨ <code>setupEventListeners()</code> æ–¹æ³•ä¸­ï¼Œäº‹ä»¶ç›‘å¬å™¨ä½¿ç”¨äº†ç®­å¤´å‡½æ•°ï¼Œ
                                ä½†åœ¨ç®­å¤´å‡½æ•°å†…éƒ¨è°ƒç”¨ <code>this.saveTrade()</code> æ—¶ï¼Œ
                                <code>this</code> ä¸Šä¸‹æ–‡ä¸æ˜¯ TradingRecordsManager å®ä¾‹ï¼Œ
                                å¯¼è‡´æ–¹æ³•è°ƒç”¨å¤±è´¥ï¼ŒAPIè¯·æ±‚æ— æ³•å‘é€ã€‚
                            </p>
                        </div>

                        <div class="alert alert-success">
                            <h6>ä¿®å¤æ–¹æ¡ˆï¼š</h6>
                            <p class="mb-0">
                                å°†æ‰€æœ‰äº‹ä»¶ç»‘å®šä¸­çš„ <code>this.methodName()</code> 
                                æ”¹ä¸º <code>tradingManager.methodName()</code>ï¼Œ
                                ä½¿ç”¨å…¨å±€çš„ tradingManager å®ä¾‹æ¥è°ƒç”¨æ–¹æ³•ã€‚
                            </p>
                        </div>

                        <h6>ä¿®å¤çš„äº‹ä»¶ç»‘å®šï¼š</h6>
                        <ul>
                            <li>ä¿å­˜äº¤æ˜“æŒ‰é’®ç‚¹å‡»äº‹ä»¶</li>
                            <li>åˆ†æ‰¹æ­¢ç›ˆåˆ‡æ¢äº‹ä»¶</li>
                            <li>ä»·æ ¼è¾“å…¥äº‹ä»¶</li>
                            <li>æ­¢æŸæ­¢ç›ˆè®¡ç®—äº‹ä»¶</li>
                            <li>è®¢æ­£ç¡®è®¤æŒ‰é’®äº‹ä»¶</li>
                            <li>æ¨¡æ€æ¡†æ˜¾ç¤º/éšè—äº‹ä»¶</li>
                            <li>äº¤æ˜“ç±»å‹é€‰æ‹©äº‹ä»¶</li>
                            <li>æ¯é¡µæ•°é‡å˜åŒ–äº‹ä»¶</li>
                        </ul>

                        <div class="mt-4">
                            <button type="button" class="btn btn-primary" onclick="testAPI()">
                                ğŸ§ª æµ‹è¯•APIè¿æ¥
                            </button>
                            <button type="button" class="btn btn-success" onclick="window.location.href='/trading-records'">
                                ğŸš€ å‰å¾€äº¤æ˜“è®°å½•é¡µé¢æµ‹è¯•
                            </button>
                        </div>

                        <div id="test-result" class="mt-3"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios@1.4.0/dist/axios.min.js"></script>
    
    <script>
        async function testAPI() {
            const resultDiv = document.getElementById('test-result');
            resultDiv.innerHTML = '<div class="alert alert-info">ğŸ”„ æµ‹è¯•APIè¿æ¥...</div>';
            
            try {
                // æµ‹è¯•APIè¿æ¥
                const response = await axios.get('/api/trades/stats');
                
                if (response.data && response.data.success) {
                    resultDiv.innerHTML = `
                        <div class="alert alert-success">
                            <h6>âœ… APIè¿æ¥æ­£å¸¸</h6>
                            <p class="mb-0">åç«¯APIå“åº”æ­£å¸¸ï¼Œç°åœ¨å¯ä»¥æµ‹è¯•å–å‡ºè®°å½•ä¿å­˜åŠŸèƒ½äº†ã€‚</p>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = `
                        <div class="alert alert-warning">
                            <h6>âš ï¸ APIå“åº”å¼‚å¸¸</h6>
                            <p class="mb-0">APIæœ‰å“åº”ä½†æ ¼å¼ä¸ç¬¦åˆé¢„æœŸ</p>
                        </div>
                    `;
                }
            } catch (error) {
                console.error('APIæµ‹è¯•å¤±è´¥:', error);
                resultDiv.innerHTML = `
                    <div class="alert alert-danger">
                        <h6>âŒ APIè¿æ¥å¤±è´¥</h6>
                        <p class="mb-0">é”™è¯¯ä¿¡æ¯: ${error.message}</p>
                    </div>
                `;
            }
        }
    </script>
</body>
</html>